# 变更日志

本项目的所有重要变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)，
本项目遵循 [语义化版本](https://semver.org/spec/v2.0.0.html)。

## [1.3.1] - 2026-01-29

### 新增
- 便利贴新增"API密钥"分类
- 支持在便利贴中存储和管理API密钥信息
- 更新便利贴API接口，支持新的分类选项

### 变更
- Note模型的category字段新增"API密钥"选项
- 更新所有便利贴相关的请求和响应模型
- 更新API文档，反映新的分类选项

## [1.3.0] - 2026-01-09

### 新增
- 便利贴功能，用于家庭信息存储
- 便利贴数据模型，包含标题、内容和分类字段
- 便利贴的 CRUD API 接口（`POST /api/v1/note/`、`GET /api/v1/note/`、`PUT /api/v1/note/{note_id}`、`DELETE /api/v1/note/{note_id}`）
- 便利贴分类支持（"地址信息"和"药方"）
- 便利贴列表 API 支持按分类筛选
- 创建便利贴表的数据库迁移脚本
- 更新 API 文档，添加便利贴接口
- 更新加密流程文档，添加便利贴创建和更新的说明

### 安全
- 所有便利贴数据使用家庭密钥加密（标题和内容）
- 与其他家庭功能（里程碑、待办事项）采用相同的安全模型
- 只有家庭成员可以访问和修改便利贴

### 文档
- 在 API_DOCS.md 中添加便利贴模型文档
- 为所有便利贴接口添加完整的 API 文档
- 添加便利贴的加密流程文档

## [未发布]

### 计划中
- [ ] 用户资料管理
- [ ] 文件上传支持
- [ ] 实时通知
- [ ] 管理员仪表板
- [ ] 备份和恢复工具
- [ ] 高级监控和日志记录

## [1.0.0] - 2024-12-27

### 新增
- Digital Home Backend 初始版本
- 零知识端到端加密系统
- 用户注册和 JWT 身份验证
- 家庭管理（创建、添加成员）
- 带加密内容的里程碑跟踪
- Docker 支持以便于部署
- 使用 release.sh 脚本进行版本管理
- 生产就绪的 docker-compose 配置
- Nginx 反向代理配置
- 完整的 API 文档

### 安全
- 所有敏感数据在客户端加密
- 为用户生成 RSA 密钥对
- 使用 AES 加密家庭共享密钥
- 基于密码的用户私钥加密
- 基于 JWT 的身份验证
- bcrypt 密码哈希

### 部署
- 多阶段 Docker 构建以优化镜像
- 用于本地开发的 Docker Compose
- 生产环境 Docker Compose 配置
- 所有服务的健康检查
- 带速率限制的 Nginx 配置
- 支持 SSL/TLS

### 文档
- API 文档（API_DOCS.md）
- 部署指南（DEPLOYMENT.md）
- 带快速入门指南的 README
- 加密测试文档

## [未发布]

### 变更
- 在 User 模型中添加 `private_key_salt` 字段，用于安全密钥派生
- 更新注册 API 以接受和存储 `private_key_salt`
- 更新登录 API 以返回 `private_key_salt`，用于客户端解密
- 增强加密流程文档，添加 PBKDF2 密钥派生详细信息

### 安全
- 使用 PBKDF2 和每个用户的唯一 salt 改进私钥加密
- 添加基于 salt 的密钥派生以防止彩虹表攻击
- 更新加密测试文档，添加 salt 验证指南

### 计划中
- [ ] 用户资料管理
- [ ] 文件上传支持
- [ ] 实时通知
- [ ] 管理员仪表板
- [ ] 备份和恢复工具
- [ ] 高级监控和日志记录
